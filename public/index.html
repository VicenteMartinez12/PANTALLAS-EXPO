<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Stands</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
</head>

<body class="container">
    <h1 class="mt-5">Selecciona el stand</h1>
    <select id="selector" onchange="redirectToSelectedPage()">
        <option >Selecciona el stand correspondiente</option>
    </select>
    <div class="row">
        <div class="col-6">


        </div>

    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Realizar solicitud HTTP para obtener los stands
            fetch('http://10.105.17.44:8000/stands/getallstands')
                .then(response => response.json()) // Convertir la respuesta a formato JSON
                .then(data => {
                    console.log(data); // Verificar el formato de los datos recibidos
    
                    // Obtener el elemento select
                    const selector = document.getElementById('selector');
    
                    // Comprobar si data.stands es un array
                    if (Array.isArray(data.stands)) {
                        // Iterar sobre los stands obtenidos y agregar opciones al select
                        data.stands.forEach(stand => {
                            // Crear una opción para cada stand
                            const option = document.createElement('option');
                            option.value = stand.id; // Establecer el valor de la opción como el ID del stand
                            option.textContent = stand.standName; // Establecer el texto de la opción como el nombre del stand
                            option.setAttribute('data-url', 'publico.html'); // Establecer el atributo de datos para la URL de la página
                            selector.appendChild(option); // Agregar la opción al select
                        });
                    } else {
                        console.error('La propiedad "stands" no es un array:', data.stands);
                    }
                })
                .catch(error => {
                    console.error('Error al obtener los stands:', error);
                });
        });
    
        // Función para redirigir a la URL correspondiente cuando se selecciona una opción en el select
        function redirectToSelectedPage() {
            // Obtener el select y la opción seleccionada
            const selector = document.getElementById('selector');
            const selectedOption = selector.options[selector.selectedIndex];
    
            // Obtener la URL de la opción seleccionada
            const selectedOptionUrl = selectedOption.getAttribute('data-url');
    
            // Redirigir a la página correspondiente
            window.location.href = selectedOptionUrl;
        }
    </script>
</body>

</html>